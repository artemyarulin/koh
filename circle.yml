machine:
  environment:
    XCODE_SCHEME: "kohRN"
  xcode:
    version: "7.0"
dependencies:
  override:
    - curl https://s3-eu-west-1.amazonaws.com/fessguid.tmp/JDK+8+Update+60.pkg > java.pkg
    - sudo installer -store -pkg java.pkg -target /
    - curl https://raw.githubusercontent.com/technomancy/leiningen/stable/bin/lein > lein
    - sudo mv lein /bin/lein
    - sudo chmod a+x /bin/lein && lein
    - brew install phantomjs
    - brew install node
    - npm install xpath xmldom
test:
  override:
    - lein doo node unit-node once
    - lein doo node integration-node once
    - lein doo phantom unit-browser once
    - lein doo phantom integration-browser once
    - cd kohRN && pod install && xcodebuild -workspace kohRN.xcworkspace -scheme kohRN -destination platform='iOS Simulator,OS=9.0,name=iPhone 6s' -sdk iphonesimulator test
